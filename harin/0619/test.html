<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>SPA</title>
    <link rel="stylesheet" href="test.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script>
        /***********************************************************
         * 게시판 만들기
         * - 기능 정의 (5가지) + α
         * 1) 작성하기    : 사용자에게 입력값을 받은 후 저장소에 남기기
         * 2) 목록보기    : 저장소에 있는 데이터를 목록으로 화면 표현하기
         * 3) 자세히보기  : 목록 중에 하나의 글를 선택한 내용만 화면 표현하기
         * 4) 수정하기    : 선택한 글의 내용을 수정하는 화면 표현하기 + 저장(1)
         * 5) 삭제하기    : 선택한 글를 목록 내용에서 빼고 +저장(1)
         * 6) 검색하기    : 목록 글에서 입력 받은 키워드를 찾아서 화면 표현하기
         ***********************************************************/

        $(document).ready(function() {

            // 1번 기능 구현
            var html = "";
            var list = [];
            list = JSON.parse(localStorage.getItem("list"));

            if (location.search != "") {
                var param = location.search.replace("?", "");
                //console.log(param);
                var params = param.split("&");
                //console.log(params);
                var row = {};
                for (var i = 0; i < params.length; i++){
                    var map = params[i].split("=");
                    //console.log(map);
                    row[map[0]] = decodeURI(map[1]);
                }
                //console.log(row);
                //                var list = [];

                if (localStorage.getItem("list") != null){
                    list = JSON.parse(localStorage.getItem("list"));
                    console.log("여기");
                }

                list[list.length]=row;
                localStorage.setItem("list", JSON.stringify(list));
                //                    location.search = "";
                for (let i = 0; i < list.length; i++) {
                    html += "타이틀: " + list[i].title + ",컨텐츠: " + list[i].contents + "<br>";
                    console.log("들어오긴했니");
                }
                $("section").empty().append(html);
            } else {
                for (let i = 0; i < list.length; i++) {
                    html += "<a href='#'>타이틀: " + list[i].title + ",컨텐츠: " + list[i].contents + "</a><br>";
                    console.log("들어오긴했니");
                }
                $("section").empty().append(html);
            }
            
            

            $("li").click(function() {});
        });
    </script>
</head>

<body>
    <nav>
        <ul>
            <li>목록</li>
            <li><a href="test2.html">신규</a></li>
        </ul>
    </nav>
    <section class="contents">
        

    </section>
    <footer></footer>
</body>

</html>